---
title: easytts
emoji: ğŸ¤
colorFrom: indigo
colorTo: purple
sdk: gradio
app_file: app.py
pinned: false
python_version: "3.10"
---

# easytts

easytts æ˜¯ä¸€ä¸ªåŸºäº **Genie-TTS / genie-ttsï¼ˆGPT-SoVITS ONNX æ¨ç†å¼•æ“ï¼‰** çš„ WebUIï¼Œç”¨äºåœ¨æµè§ˆå™¨é‡Œè¿›è¡Œæ–‡æœ¬è½¬è¯­éŸ³ï¼ˆTTSï¼‰ã€‚

## é¡¹ç›®ä¸ä½œè€…

- æœ¬é¡¹ç›®ï¼š`yunchenqwq/easytts`
  - ä½œè€…ï¼šyunchenqwq
  - GitHub ä¸»é¡µï¼š`https://github.com/YunChenqwq`
  - ä»“åº“åœ°å€ï¼š`https://github.com/YunChenqwq/easytts`
- ä¸Šæ¸¸é¡¹ç›®ï¼šGenie-TTSï¼ˆé¡¹ç›®æ¥æºï¼‰
  - `https://github.com/High-Logic/Genie-TTS`

## é‡è¦æé†’ï¼ˆå¼€æºåè®®ï¼‰

æœ¬ä»“åº“ä¸ä¸Šæ¸¸ä¾èµ–å‡æœ‰å„è‡ªçš„å¼€æºåè®®è¦æ±‚ï¼›éƒ¨ç½²/äºŒæ¬¡åˆ†å‘/å•†ç”¨å‰è¯·åŠ¡å¿…é˜…è¯»å¹¶éµå®ˆå„é¡¹ç›®çš„ `LICENSE`ã€‚

## ä½¿ç”¨è¯´æ˜

easytts æ˜¯ä¸€ä¸ªåŸºäº **Genie-TTS / genie-ttsï¼ˆGPT-SoVITS ONNX æ¨ç†å¼•æ“ï¼‰** çš„ WebUIï¼Œç”¨äºåœ¨æµè§ˆå™¨é‡Œè¿›è¡Œæ–‡æœ¬è½¬è¯­éŸ³ï¼ˆTTSï¼‰ï¼Œå¹¶æ”¯æŒï¼š

- é¢„è®¾è§’è‰²ï¼šè‡ªåŠ¨ä» Hugging Face ä¸‹è½½èµ„æºå’Œè§’è‰²æ¨¡å‹ï¼Œå¼€ç®±å³ç”¨
- è‡ªå®šä¹‰æ¨¡å‹ï¼šä¸Šä¼ ä½ è‡ªå·±çš„ **Genie-TTS ONNX æ¨¡å‹ zip**ï¼Œå†ä¸Šä¼ å‚è€ƒéŸ³é¢‘åšæƒ…ç»ª/è¯­è°ƒå…‹éš†

> æ³¨æ„ï¼šæœ¬é¡¹ç›®ä¸ä¸Šæ¸¸ä¾èµ–å‡æœ‰å„è‡ªçš„å¼€æºåè®®è¦æ±‚ï¼›éƒ¨ç½²/äºŒæ¬¡åˆ†å‘è¯·åŠ¡å¿…éµå®ˆï¼ˆæŸ¥çœ‹å„é¡¹ç›® `LICENSE`ï¼‰ã€‚

## 1. æœ€çœäº‹çš„æ–¹å¼ï¼šç›´æ¥ä» Hugging Face å¤åˆ¶

å¦‚æœä½ çœ‹åˆ°çš„æ˜¯ Hugging Face Spaces é¡µé¢ï¼š

1) ç›´æ¥ç‚¹å‡» **Duplicate Space / å¤åˆ¶ Space**  
2) ï¼ˆæ¨èï¼‰å¼€å¯ **Persistent Storage**ï¼Œè¿™æ ·ä¸‹è½½çš„ `GenieData` ä¸æ¨¡å‹ä¼šç¼“å­˜åˆ° `/data`ï¼Œä¸‹æ¬¡å¯åŠ¨ä¸ç”¨é‡ä¸‹  
3) æ‰“å¼€ Space çš„ WebUI ä½¿ç”¨å³å¯ï¼ˆé¦–æ¬¡ä¸‹è½½å¯èƒ½éœ€è¦å‡ åç§’åˆ°æ•°åˆ†é’Ÿï¼‰

easytts ä¼šè‡ªåŠ¨ä¸‹è½½ï¼š

- `GenieData`ï¼ˆçº¦ 391MBï¼‰
- ä½ é€‰æ‹©çš„é¢„è®¾è§’è‰²æ¨¡å‹ï¼ˆé¦–æ¬¡ä½¿ç”¨è¯¥è§’è‰²æ—¶ä¸‹è½½ï¼‰

## 2. WebUI æ€ä¹ˆç”¨

æ‰“å¼€ WebUI åæœ‰ä¸¤ä¸ªé¡µç­¾ï¼š

## 2.1 å‚è€ƒéŸ³é¢‘æ˜¯ä¸æ˜¯å¿…é¡»ï¼Ÿ

- **é¢„è®¾è§’è‰²ï¼šä¸éœ€è¦ä½ æ‰‹åŠ¨ä¸Šä¼ å‚è€ƒéŸ³é¢‘**ã€‚å› ä¸ºæ¯ä¸ªé¢„è®¾è§’è‰²è‡ªå¸¦äº†å†…ç½®å‚è€ƒéŸ³é¢‘ï¼ˆæƒ…ç»ª/é£æ ¼ï¼‰ï¼ŒWebUI é»˜è®¤ç›´æ¥ä½¿ç”¨å®ƒæ¥åˆæˆï¼ˆä½ ä¹Ÿå¯ä»¥åˆ‡æ¢ä¸ºâ€œä¸Šä¼ å‚è€ƒéŸ³é¢‘â€æ¥åšæ›´å¼ºçš„æƒ…ç»ª/è¯­è°ƒå…‹éš†ï¼‰ã€‚
- **è‡ªå®šä¹‰æ¨¡å‹ï¼šéœ€è¦å‚è€ƒéŸ³é¢‘ + å¯¹åº”æ–‡æœ¬**ã€‚å½“å‰ç‰ˆæœ¬çš„æ¨ç†æµç¨‹ä¾èµ–å‚è€ƒéŸ³é¢‘æ¥æå–è¯´è¯äºº/é£æ ¼ä¿¡æ¯ï¼Œå¦‚æœä¸æä¾›ï¼Œåº“ä¼šæ‹’ç»åˆæˆã€‚

### A) é¢„è®¾è§’è‰²

1) é€‰æ‹©ä¸€ä¸ªè§’è‰²ï¼ˆå¦‚ `Mika / ThirtySeven / Feibi`ï¼‰  
2) é€‰æ‹©â€œå‚è€ƒéŸ³é¢‘â€æ¨¡å¼ï¼š
   - **ä½¿ç”¨è§’è‰²å†…ç½®å‚è€ƒéŸ³é¢‘ï¼ˆæƒ…ç»ª/é£æ ¼ï¼‰**ï¼šå¯é€‰ `Normal/Sad/Fear/...`ï¼ˆä¸åŒè§’è‰²å¯ç”¨é¡¹ä¸åŒï¼‰
   - **ä¸Šä¼ å‚è€ƒéŸ³é¢‘ï¼ˆæƒ…ç»ª/è¯­è°ƒå…‹éš†ï¼‰**ï¼šä½ ä¸Šä¼ ä¸€æ®µéŸ³é¢‘ + å¡«å†™å®ƒå¯¹åº”çš„æ–‡æœ¬
3) è¾“å…¥è¦åˆæˆçš„â€œæ–‡æœ¬â€ï¼Œç‚¹å‡»â€œç”Ÿæˆè¯­éŸ³â€  
4) åœ¨â€œè¾“å‡ºéŸ³é¢‘â€é‡Œæ’­æ”¾ï¼Œæˆ–ç”¨â€œä¸‹è½½ WAVâ€ä¿å­˜

### B) è‡ªå®šä¹‰æ¨¡å‹

è‡ªå®šä¹‰æ¨¡å‹éœ€è¦ä½ å…ˆæŠŠæ¨¡å‹å‡†å¤‡æˆ **zip** å¹¶åœ¨ WebUI é‡ŒåŠ è½½ã€‚

#### 1) ä¸Šä¼ å¹¶åŠ è½½ ONNX æ¨¡å‹

1) å¡«å†™â€œæ¨¡å‹åç§°â€ï¼ˆä¼šä½œä¸º WebUI é‡Œçš„è§’è‰²åä½¿ç”¨ï¼‰  
2) é€‰æ‹©â€œæ¨¡å‹è¯­è¨€â€ï¼ˆ`zh/en/jp/hybrid`ï¼‰  
3) ä¸Šä¼ ä½ çš„ **ONNX æ¨¡å‹ zip**ï¼Œç‚¹å‡»â€œä¸Šä¼ å¹¶åŠ è½½æ¨¡å‹â€  
   - ï¼ˆå¯é€‰ï¼‰å¦‚æœä½ å¸Œæœ›**ä¸å†å•ç‹¬ä¸Šä¼ å‚è€ƒéŸ³é¢‘**ï¼Œä¹Ÿå¯ä»¥æŠŠå‚è€ƒéŸ³é¢‘ä¸ `prompt_wav.json` ä¸€èµ·æ‰“åŒ…è¿› zipï¼ˆè§ä¸‹æ–‡â€œæŠŠå‚è€ƒéŸ³é¢‘ä¸€èµ·æ‰“åŒ…â€ï¼‰
4) â€œåŠ è½½çŠ¶æ€â€æ˜¾ç¤ºæˆåŠŸåï¼Œè¿›å…¥ä¸‹ä¸€æ­¥

#### 2) ä¸Šä¼ å‚è€ƒéŸ³é¢‘ï¼ˆå¿…é¡»ï¼‰

1) ä¸Šä¼ å‚è€ƒéŸ³é¢‘ï¼ˆå»ºè®® 3~10 ç§’ï¼Œå¹²å‡€äººå£°ï¼Œå°½é‡æ— èƒŒæ™¯éŸ³ä¹ï¼‰  
2) å¡«å†™â€œå‚è€ƒéŸ³é¢‘å¯¹åº”æ–‡æœ¬â€ï¼ˆå¿…é¡»ä¸éŸ³é¢‘é‡Œè¯´çš„å†…å®¹ä¸€è‡´ï¼‰  

æ”¯æŒçš„å‚è€ƒéŸ³é¢‘æ ¼å¼ï¼š`wav / flac / ogg / aiff / aif`

#### 2.1 æŠŠå‚è€ƒéŸ³é¢‘ä¸€èµ·æ‰“åŒ…ï¼ˆå¯é€‰ï¼Œæ¨èï¼‰

ä½ ä¹Ÿå¯ä»¥æŠŠå‚è€ƒéŸ³é¢‘ä¸æ–‡æœ¬ç›´æ¥æ”¾è¿›æ¨¡å‹ zipï¼Œè®© WebUI è‡ªåŠ¨è§£æå¹¶åœ¨ç•Œé¢æä¾›â€œå†…ç½®å‚è€ƒï¼ˆæƒ…ç»ª/é£æ ¼ï¼‰â€ä¸‹æ‹‰æ¡†ï¼š

- åœ¨ zip ä¸­æ”¾ä¸€ä¸ª `prompt_wav.json`
- å¹¶æ”¾ä¸€ä¸ª `prompt_wav/` æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ˜¯ `prompt_wav.json` é‡Œ `wav` å­—æ®µå¯¹åº”çš„éŸ³é¢‘æ–‡ä»¶

ç¤ºä¾‹ç»“æ„ï¼š

- `your_model.zip`
  - `t2s_encoder_fp32.onnx` / `...`
  - `vits_fp32.onnx` / `...`
  - `prompt_wav.json`
  - `prompt_wav/`
    - `Normal.wav`
    - `Sad.ogg`

ä¸Šä¼ å¹¶åŠ è½½æˆåŠŸåï¼Œåœ¨â€œå‚è€ƒéŸ³é¢‘â€å¤„é€‰æ‹©â€œä½¿ç”¨å‹ç¼©åŒ…å†…ç½®å‚è€ƒï¼ˆæƒ…ç»ª/é£æ ¼ï¼‰â€å³å¯ï¼Œæ— éœ€å†å•ç‹¬ä¸Šä¼ å‚è€ƒéŸ³é¢‘ã€‚

#### 3) åˆæˆ

1) è¾“å…¥è¦åˆæˆçš„â€œæ–‡æœ¬â€  
2) ç‚¹å‡»â€œç”Ÿæˆè¯­éŸ³â€å¾—åˆ°è¾“å‡º

## 3. ONNX æ¨¡å‹ zip éœ€è¦åŒ…å«ä»€ä¹ˆ

zip å†…åº”åŒ…å« Genie-TTS éœ€è¦çš„ ONNX æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨åŒä¸€ç›®å½•ä¸‹ï¼‰ã€‚å¸¸è§å¿…éœ€æ–‡ä»¶åŒ…æ‹¬ï¼š

- `t2s_encoder_fp32.bin`
- `t2s_encoder_fp32.onnx`
- `t2s_first_stage_decoder_fp32.onnx`
- `t2s_shared_fp16.bin`
- `t2s_stage_decoder_fp32.onnx`
- `vits_fp16.bin`
- `vits_fp32.onnx`

> æç¤ºï¼šzip å¤–é¢å¤šåŒ…ä¸€å±‚ç›®å½•ä¹Ÿå¯ä»¥ï¼ˆWebUI ä¼šå°è¯•è‡ªåŠ¨è¯†åˆ«ï¼‰ã€‚

## 4. å¸¸è§é—®é¢˜

### è®¿é—® `http://0.0.0.0:7860` æ˜¾ç¤º 502

`0.0.0.0` æ˜¯â€œç›‘å¬åœ°å€â€ï¼Œä¸æ˜¯æµè§ˆå™¨è®¿é—®åœ°å€ã€‚è¯·ä½¿ç”¨ï¼š

- `http://127.0.0.1:7860`
- `http://localhost:7860`

### é¦–æ¬¡åŠ è½½/ç”Ÿæˆå¾ˆæ…¢

é¦–æ¬¡éœ€è¦ä¸‹è½½ `GenieData` å’Œæ¨¡å‹æ–‡ä»¶ï¼Œå±äºæ­£å¸¸ç°è±¡ã€‚å»ºè®®åœ¨ Spaces å¼€å¯ Persistent Storage ä»¥ä¾¿ç¼“å­˜ã€‚

## 5. ä½œä¸º Python æ¥å£å‡½æ•°åº“è°ƒç”¨ï¼ˆè¿œç¨‹ï¼‰

å¦‚æœä½ å·²ç»æŠŠ easytts éƒ¨ç½²åˆ°äº† ModelScope / HuggingFaceï¼ˆèƒ½åœ¨æµè§ˆå™¨é‡Œæ­£å¸¸ä½¿ç”¨ WebUIï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„ Python é¡¹ç›®é‡Œç›´æ¥è°ƒç”¨â€œçº¿ä¸Š WebUIâ€æ¥åˆæˆè¯­éŸ³ã€‚

### 5.1 é…ç½® Tokenï¼ˆä¸¤é€‰ä¸€ï¼‰

**æ–¹å¼ Aï¼šå†™æœ¬åœ°é…ç½®æ–‡ä»¶ï¼ˆæ¨èæœ¬åœ°å¼€å‘ï¼‰**

1) å¤åˆ¶ `easytts_secrets.example.py` ä¸º `easytts_secrets.py`
2) å¡«å…¥ `EASYTTS_STUDIO_TOKEN`ï¼ˆæ³¨æ„ï¼šä¸è¦æŠŠ token æäº¤åˆ° gitï¼Œä¹Ÿä¸è¦å‘åˆ°èŠå¤©é‡Œï¼‰

**æ–¹å¼ Bï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èéƒ¨ç½²/ç”Ÿäº§ï¼‰**

- `EASYTTS_BASE_URL`ï¼šé»˜è®¤ `https://yunchenqwq-easytts.ms.show`
- `EASYTTS_STUDIO_TOKEN`ï¼šå¿…å¡«ï¼ˆæœºå¯†ï¼‰
- `EASYTTS_FN_INDEX`ï¼šé»˜è®¤ `3`
- `EASYTTS_TRIGGER_ID`ï¼šé»˜è®¤ `19`

### 5.2 ä»£ç ç¤ºä¾‹

```python
from easytts_client import EasyTTS

tts = EasyTTS()

# 1) ä½¿ç”¨é¢„è®¾è§’è‰² + é¢„è®¾æƒ…ç»ªï¼ˆä¸éœ€è¦ä½ è‡ªå·±ä¸Šä¼ å‚è€ƒéŸ³é¢‘ï¼‰
res = tts.tts_preset(text="ç§ã‚‚æ˜”ã€ã“ã‚Œã¨ä¼¼ãŸã‚ˆã†ãªã®æŒã£ã¦ãŸãªãâ€¦ã€‚", character="mika", preset="æ™®é€š")
EasyTTS.save(res, "out_preset.wav")

# 2) ä¸Šä¼ å‚è€ƒéŸ³é¢‘ + å‚è€ƒæ–‡æœ¬ï¼ˆæ›´å¼ºçš„æƒ…ç»ª/è¯­è°ƒå…‹éš†ï¼‰
# æ³¨æ„ï¼šreference_text å¿…é¡»ä¸å‚è€ƒéŸ³é¢‘é‡Œè¯´çš„è¯ä¸€è‡´
res = tts.tts_upload(
    text="ä½ å¥½ï¼Œä»Šå¤©å¿ƒæƒ…æœ‰ç‚¹éš¾è¿‡ã€‚",
    character="mika",
    preset="ä¼¤å¿ƒ",
    reference_audio="ref.ogg",   # ä¹Ÿå¯ä»¥ä¼  bytes
    reference_text="æˆ‘ä»Šå¤©å¿ƒæƒ…çœŸçš„å¾ˆéš¾è¿‡ã€‚",
)
EasyTTS.save(res, "out_upload.wav")
```

## 6. æœ¬åœ° Python è°ƒç”¨ï¼ˆä¸èµ°äº‘ç«¯ï¼‰

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°ç›´æ¥ç”¨ Python è°ƒç”¨ï¼ˆä¸é€šè¿‡ WebUI / ä¸é€šè¿‡äº‘ç«¯ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ `EasyTTSLocal`ï¼ˆå†…éƒ¨ç›´æ¥è°ƒç”¨ `genie_tts` æ¨ç†ï¼‰ã€‚

å‰æï¼š
- å·²å®‰è£…ä¾èµ–ï¼ˆä¸ä½ æœ¬åœ° WebUI ç›¸åŒç¯å¢ƒå³å¯ï¼‰
- å·²æœ‰æ¨¡å‹èµ„æºï¼š`GenieData/` ä¸ `CharacterModels/`ï¼ˆç¬¬ä¸€æ¬¡ä½¿ç”¨ä¼šè‡ªåŠ¨ä¸‹è½½/åˆå§‹åŒ–ï¼Œå–å†³äºä½ çš„ç½‘ç»œä¸è®¾ç½®ï¼‰

ç¤ºä¾‹ï¼š

```python
from easytts_client import EasyTTSLocal, EasyTTS

tts = EasyTTSLocal()

# é¢„è®¾è§’è‰² + é¢„è®¾æƒ…ç»ªï¼ˆä½¿ç”¨æœ¬åœ° prompt_wav.json + prompt_wav/ï¼‰
res = tts.tts_preset(text="ä½ å¥½", character="mika", preset="æ™®é€š", out_path="local_preset.wav")
EasyTTS.save(res, "local_preset.wav")

# ä¸Šä¼ å‚è€ƒéŸ³é¢‘ï¼ˆæœ¬åœ°æ–‡ä»¶ï¼‰+ å‚è€ƒæ–‡æœ¬
res = tts.tts_upload(
    text="ä½ å¥½ï¼Œä»Šå¤©å¿ƒæƒ…æœ‰ç‚¹éš¾è¿‡ã€‚",
    character="mika",
    reference_audio="ref.ogg",
    reference_text="æˆ‘ä»Šå¤©å¿ƒæƒ…çœŸçš„å¾ˆéš¾è¿‡ã€‚",
    out_path="local_upload.wav",
)
EasyTTS.save(res, "local_upload.wav")
```

